<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.30">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nabil Mikhael, Alessandro Gregori">
<meta name="dcterms.date" content="2025-09-22">

<title>PRR MINICHALLENGE FS24</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="PRR_MC_QuartoDocument_files/libs/clipboard/clipboard.min.js"></script>
<script src="PRR_MC_QuartoDocument_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="PRR_MC_QuartoDocument_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="PRR_MC_QuartoDocument_files/libs/quarto-html/popper.min.js"></script>
<script src="PRR_MC_QuartoDocument_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="PRR_MC_QuartoDocument_files/libs/quarto-html/anchor.min.js"></script>
<link href="PRR_MC_QuartoDocument_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PRR_MC_QuartoDocument_files/libs/quarto-html/quarto-syntax-highlighting-de070a7b0ab54f8780927367ac907214.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="PRR_MC_QuartoDocument_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="PRR_MC_QuartoDocument_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="PRR_MC_QuartoDocument_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="PRR_MC_QuartoDocument_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="PRR_MC_QuartoDocument_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="PRR_MC_QuartoDocument_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="PRR_MC_QuartoDocument_files/libs/datatables-binding-0.34.0/datatables.js"></script>
<script src="PRR_MC_QuartoDocument_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="PRR_MC_QuartoDocument_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="PRR_MC_QuartoDocument_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="PRR_MC_QuartoDocument_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="PRR_MC_QuartoDocument_files/libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="PRR_MC_QuartoDocument_files/libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link active" data-scroll-target="#setup">1. SETUP</a>
  <ul class="collapse">
  <li><a href="#renv" id="toc-renv" class="nav-link" data-scroll-target="#renv">1.1 Renv</a></li>
  <li><a href="#installieren-der-packages" id="toc-installieren-der-packages" class="nav-link" data-scroll-target="#installieren-der-packages">1.2 Installieren der packages</a></li>
  <li><a href="#laden-der-packages" id="toc-laden-der-packages" class="nav-link" data-scroll-target="#laden-der-packages">1.3 Laden der packages</a></li>
  </ul></li>
  <li><a href="#webscraping" id="toc-webscraping" class="nav-link" data-scroll-target="#webscraping">2. WEBSCRAPING</a>
  <ul class="collapse">
  <li><a href="#funktion-extraktion-letzte-seite" id="toc-funktion-extraktion-letzte-seite" class="nav-link" data-scroll-target="#funktion-extraktion-letzte-seite">2.1 Funktion Extraktion letzte Seite</a></li>
  <li><a href="#erstellen-des-leeren-dataframes" id="toc-erstellen-des-leeren-dataframes" class="nav-link" data-scroll-target="#erstellen-des-leeren-dataframes">2.2 Erstellen des leeren Dataframes</a></li>
  <li><a href="#vektorerstellung-der-gesuchten-stÃ¤dte" id="toc-vektorerstellung-der-gesuchten-stÃ¤dte" class="nav-link" data-scroll-target="#vektorerstellung-der-gesuchten-stÃ¤dte">2.3 Vektorerstellung der gesuchten StÃ¤dte</a></li>
  <li><a href="#scraping" id="toc-scraping" class="nav-link" data-scroll-target="#scraping">2.4 Scraping</a></li>
  </ul></li>
  <li><a href="#datenaufbereitung" id="toc-datenaufbereitung" class="nav-link" data-scroll-target="#datenaufbereitung">3. DATENAUFBEREITUNG</a>
  <ul class="collapse">
  <li><a href="#Ã¼bersicht" id="toc-Ã¼bersicht" class="nav-link" data-scroll-target="#Ã¼bersicht">3.1 Ãœbersicht</a></li>
  <li><a href="#beobachtungen-mit-nas-entfernen" id="toc-beobachtungen-mit-nas-entfernen" class="nav-link" data-scroll-target="#beobachtungen-mit-nas-entfernen">3.2 Beobachtungen mit NAâ€™s entfernen</a></li>
  </ul></li>
  <li><a href="#datenexploration" id="toc-datenexploration" class="nav-link" data-scroll-target="#datenexploration">4. DATENEXPLORATION</a>
  <ul class="collapse">
  <li><a href="#vergleich-statistischer-kennzahlen" id="toc-vergleich-statistischer-kennzahlen" class="nav-link" data-scroll-target="#vergleich-statistischer-kennzahlen">4.1 Vergleich statistischer Kennzahlen</a>
  <ul class="collapse">
  <li><a href="#erstellen-der-summaries" id="toc-erstellen-der-summaries" class="nav-link" data-scroll-target="#erstellen-der-summaries">4.1.1 Erstellen der Summaries</a></li>
  <li><a href="#erstellen-des-dataframes" id="toc-erstellen-des-dataframes" class="nav-link" data-scroll-target="#erstellen-des-dataframes">4.1.2 Erstellen des Dataframes</a></li>
  <li><a href="#lollipop-plot-summary-preise-und-wohnungsgrÃ¶ssen" id="toc-lollipop-plot-summary-preise-und-wohnungsgrÃ¶ssen" class="nav-link" data-scroll-target="#lollipop-plot-summary-preise-und-wohnungsgrÃ¶ssen">4.1.3 Lollipop-Plot Summary Preise und WohnungsgrÃ¶ssen</a></li>
  </ul></li>
  <li><a href="#barplot-anzahl-angebote" id="toc-barplot-anzahl-angebote" class="nav-link" data-scroll-target="#barplot-anzahl-angebote">4.2 Barplot Anzahl Angebote</a></li>
  <li><a href="#scatterplot-wohnungsgrÃ¶sse-vs.-preis" id="toc-scatterplot-wohnungsgrÃ¶sse-vs.-preis" class="nav-link" data-scroll-target="#scatterplot-wohnungsgrÃ¶sse-vs.-preis">4.3 Scatterplot WohnungsgrÃ¶sse vs.&nbsp;Preis</a></li>
  <li><a href="#densityplot-preisvergleich" id="toc-densityplot-preisvergleich" class="nav-link" data-scroll-target="#densityplot-preisvergleich">4.4 Densityplot Preisvergleich</a></li>
  <li><a href="#densityplot-wohnungsgrÃ¶ssenvergleich" id="toc-densityplot-wohnungsgrÃ¶ssenvergleich" class="nav-link" data-scroll-target="#densityplot-wohnungsgrÃ¶ssenvergleich">4.5 Densityplot WohnungsgrÃ¶ssenvergleich</a></li>
  <li><a href="#boxplot-preisvergleich" id="toc-boxplot-preisvergleich" class="nav-link" data-scroll-target="#boxplot-preisvergleich">4.6 Boxplot Preisvergleich</a></li>
  <li><a href="#boxplot-wohnungsgrÃ¶ssenvergleich" id="toc-boxplot-wohnungsgrÃ¶ssenvergleich" class="nav-link" data-scroll-target="#boxplot-wohnungsgrÃ¶ssenvergleich">4.7 Boxplot WohnungsgrÃ¶ssenvergleich</a></li>
  <li><a href="#barplot-anzahl-plz" id="toc-barplot-anzahl-plz" class="nav-link" data-scroll-target="#barplot-anzahl-plz">4.8 Barplot Anzahl PLZ</a></li>
  </ul></li>
  <li><a href="#resultate" id="toc-resultate" class="nav-link" data-scroll-target="#resultate">5. RESULTATE</a></li>
  <li><a href="#ausblick" id="toc-ausblick" class="nav-link" data-scroll-target="#ausblick">6. AUSBLICK</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="PRR_MC_QuartoDocument.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">PRR MINICHALLENGE FS24</h1>
<p class="subtitle lead">Scraping und Vergleich von Immobilien-Mietangeboten</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Nabil Mikhael, Alessandro Gregori </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 22, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="setup" class="level1">
<h1>1. SETUP</h1>
<section id="renv" class="level2">
<h2 class="anchored" data-anchor-id="renv">1.1 Renv</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verwende renv mit Projekt:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">init</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- The project is out-of-sync -- use `]8;;x-r-run:renv::status()renv::status()]8;;` for details.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Speichere aktuell verwendete Pakete in ein .lockfile</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">snapshot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The following package(s) will be updated in the lockfile:

# CRAN -----------------------------------------------------------------------
- renv   [1.0.7 -&gt; 1.1.5]

- Lockfile written to "~/Desktop/Studium/2. Semester/PRR/PRR _MC_21052024/Report/renv.lock".</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wenn das Projekt z.B. von GitHub heruntergeladen wurde, stellte alle </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Pakete her (d.h. installiere enstprechende Versionen)</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">restore</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- The library is already synchronized with the lockfile.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pakete kÃ¶nnen zwischendurch geupdatet werden</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">update</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- Querying repositories for available binary packages ... Done!
- Querying repositories for available source packages ... Done!
- Checking for updated packages ... Done!
The following package(s) will be updated:

# CRAN -----------------------------------------------------------------------
- vroom   [1.6.5 -&gt; 1.6.6]

# Downloading packages -------------------------------------------------------
- Downloading vroom from CRAN ...               OK [862.4 Kb in 0.85s]
Successfully downloaded 1 package in 0.97 seconds.

The following package(s) will be installed:
- vroom [1.6.6]
These packages will be installed into "~/Desktop/Studium/2. Semester/PRR/PRR _MC_21052024/Report/renv/library/macos/R-4.5/aarch64-apple-darwin20".

# Installing packages --------------------------------------------------------
- Installing vroom ...                          OK [installed binary and cached]
Successfully installed 1 package in 0.11 seconds.</code></pre>
</div>
</div>
</section>
<section id="installieren-der-packages" class="level2">
<h2 class="anchored" data-anchor-id="installieren-der-packages">1.2 Installieren der packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Installieren der Packages, falls noch nicht vorhanden</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"rvest"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"rvest"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"tidyverse"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"stringr"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"stringr"</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"purrr"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"purrr"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"tibble"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"tibble"</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"DT"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"DT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="laden-der-packages" class="level2">
<h2 class="anchored" data-anchor-id="laden-der-packages">1.3 Laden der packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'rvest'</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'tidyverse'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>â”€â”€ Attaching core tidyverse packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 2.0.0 â”€â”€
âœ” dplyr     1.1.4     âœ” readr     2.1.5
âœ” forcats   1.0.0     âœ” stringr   1.5.2
âœ” ggplot2   4.0.0     âœ” tibble    3.3.0
âœ” lubridate 1.9.4     âœ” tidyr     1.3.1
âœ” purrr     1.1.0     
â”€â”€ Conflicts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€
âœ– dplyr::filter()         masks stats::filter()
âœ– readr::guess_encoding() masks rvest::guess_encoding()
âœ– dplyr::lag()            masks stats::lag()
â„¹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'stringr'</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'purrr'</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'tibble'</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'DT'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="webscraping" class="level1">
<h1>2. WEBSCRAPING</h1>
<section id="funktion-extraktion-letzte-seite" class="level2">
<h2 class="anchored" data-anchor-id="funktion-extraktion-letzte-seite">2.1 Funktion Extraktion letzte Seite</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Funktion zur Extraktion der Nummer der letzten Seite aus einer URL</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>get_last_page <span class="ot">&lt;-</span> <span class="cf">function</span>(url) {</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># LÃ¤dt das HTML-Dokument von der angegebenen URL</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Verwendet CSS-Selektoren, um das vorletzte Element innerhalb der Paginator-Box zu extrahieren</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  last_page_number <span class="ot">&lt;-</span> page <span class="sc">%&gt;%</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_elements</span>(<span class="st">".HgPaginationSelector_paginatorBox_nNiMu a:nth-last-of-type(2)"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extrahiert den Textinhalt des HTML-Elements (dies sollte die Seitenzahl sein)</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Schneidet das letzte Zeichen des Textes ab (Seitenzahl als letztes Zeichen)</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_sub</span>(.,<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Konvertiert den extrahierten Text in eine numerische Form</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.numeric</span>()</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Druckt die extrahierte Nummer der letzten Seite zur ÃœberprÃ¼fung</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Extracted last page number:"</span>, last_page_number))</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Gibt die Nummer der letzten Seite zurÃ¼ck</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(last_page_number)</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="erstellen-des-leeren-dataframes" class="level2">
<h2 class="anchored" data-anchor-id="erstellen-des-leeren-dataframes">2.2 Erstellen des leeren Dataframes</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>immoscout24_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="vektorerstellung-der-gesuchten-stÃ¤dte" class="level2">
<h2 class="anchored" data-anchor-id="vektorerstellung-der-gesuchten-stÃ¤dte">2.3 Vektorerstellung der gesuchten StÃ¤dte</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Erstellen des Vektors mit den gesuchten StÃ¤dten</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"basel"</span>, <span class="st">"zuerich"</span>, <span class="st">"bern"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="scraping" class="level2">
<h2 class="anchored" data-anchor-id="scraping">2.4 Scraping</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scraping mittels for-Schleife Ã¼ber alle StÃ¤dte und deren Seiten</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (city <span class="cf">in</span> cities) {  <span class="co"># Schleife Ã¼ber alle StÃ¤dte</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  link <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"https://www.immoscout24.ch/de/immobilien/mieten/ort-"</span>, city, <span class="st">"?pn=1&amp;nrf=3.5&amp;nrt=3.5"</span>)  <span class="co"># URL Suche der gewÃ¼nschten Stadt</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  last_page <span class="ot">&lt;-</span> <span class="fu">get_last_page</span>(link)  <span class="co"># Letzte Seitenzahl extrahieren</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (page_result <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>last_page) {  <span class="co"># Schleife Ã¼ber die Seitenzahlen</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    link <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"https://www.immoscout24.ch/de/immobilien/mieten/ort-"</span>,      city, <span class="st">"?pn="</span>, page_result, <span class="st">"&amp;nrf=3.5&amp;nrt=3.5"</span>)  <span class="co"># URL der Seite</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(link)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    size <span class="ot">&lt;-</span> page <span class="sc">%&gt;%</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_elements</span>(<span class="st">"span+strong"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gsub</span>(<span class="st">"mÂ²"</span>, <span class="st">""</span>, .) <span class="sc">%&gt;%</span>  <span class="co"># mit gsub m2 entfernen aus FlÃ¤che</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">as.numeric</span>() <span class="co"># in numerische Zahl umwandeln</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    price <span class="ot">&lt;-</span> page <span class="sc">%&gt;%</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_elements</span>(<span class="st">".HgListingRoomsLivingSpacePrice_price_u9Vee"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">"[^0-9]"</span>, <span class="at">replace =</span><span class="st">""</span>, .) <span class="sc">%&gt;%</span> <span class="co"># Alle Werte ersetzen die keine Zahl zwischen 0-9 sind; Preis wird bspw. von " CHF 1â€™180.â€“ " zu 1180</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">as.numeric</span>()</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    plz <span class="ot">&lt;-</span> page <span class="sc">%&gt;%</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_elements</span>(<span class="st">"div address"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sapply</span>(<span class="cf">function</span>(x) {</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>        parts <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(x, <span class="st">" "</span>)[[<span class="dv">1</span>]]  <span class="co"># Teilt die Adresse an den Leerzeichen</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">length</span>(parts) <span class="sc">&gt;=</span> <span class="dv">2</span>) {</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>          sub_part <span class="ot">&lt;-</span> <span class="fu">trimws</span>(parts[<span class="fu">length</span>(parts)<span class="sc">-</span><span class="dv">1</span>])  <span class="co"># WÃ¤hlt vorletzten Teil und entfernt fÃ¼hrende/anhÃ¤ngende Leerzeichen</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>(sub_part)</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>(<span class="cn">NA</span>)  <span class="co"># RÃ¼ckgabe NA, wenn weniger als zwei Teile vorhanden sind</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ermitteln der maximalsten LÃ¤nge</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>  max_length <span class="ot">&lt;-</span> <span class="fu">max</span>(<span class="fu">length</span>(price), <span class="fu">length</span>(plz), <span class="fu">length</span>(size))</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Listen auf maximale LÃ¤nge bringen</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">length</span>(price) <span class="ot">&lt;-</span> max_length</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">length</span>(plz) <span class="ot">&lt;-</span> max_length</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">length</span>(size) <span class="ot">&lt;-</span> max_length</span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ZusammenfÃ¼gen der Daten zu einem DataFrame</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>  new_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"Price [CHF]"</span> <span class="ot">=</span> price, <span class="st">"Size [m2]"</span> <span class="ot">=</span> size, <span class="at">PLZ =</span> plz, <span class="at">City =</span> city)</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>  immoscout24_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(immoscout24_df, new_data)</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Drucke die Seitennummer und den Link</span></span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"City:"</span>, city,<span class="st">"/ Page:"</span>, page_result, <span class="st">"/ Link:"</span>, link))</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Schutzmechanismus der Webseite umgehen (wegen zu vielen Anfragen); sonst Bann </span></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="dv">5</span>) <span class="co"># 5 Sekunden</span></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(city, <span class="st">"Finished"</span>))</span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Extracted last page number: 9"
[1] "City: basel / Page: 1 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-basel?pn=1&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: basel / Page: 2 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-basel?pn=2&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: basel / Page: 3 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-basel?pn=3&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: basel / Page: 4 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-basel?pn=4&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: basel / Page: 5 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-basel?pn=5&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: basel / Page: 6 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-basel?pn=6&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: basel / Page: 7 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-basel?pn=7&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: basel / Page: 8 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-basel?pn=8&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: basel / Page: 9 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-basel?pn=9&amp;nrf=3.5&amp;nrt=3.5"
[1] "basel Finished"
[1] "Extracted last page number: 2"
[1] "City: zuerich / Page: 1 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-zuerich?pn=1&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: zuerich / Page: 2 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-zuerich?pn=2&amp;nrf=3.5&amp;nrt=3.5"
[1] "zuerich Finished"
[1] "Extracted last page number: 5"
[1] "City: bern / Page: 1 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-bern?pn=1&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: bern / Page: 2 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-bern?pn=2&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: bern / Page: 3 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-bern?pn=3&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: bern / Page: 4 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-bern?pn=4&amp;nrf=3.5&amp;nrt=3.5"
[1] "City: bern / Page: 5 / Link: https://www.immoscout24.ch/de/immobilien/mieten/ort-bern?pn=5&amp;nrf=3.5&amp;nrt=3.5"
[1] "bern Finished"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Scraping finished"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Scraping finished"</code></pre>
</div>
</div>
</section>
</section>
<section id="datenaufbereitung" class="level1">
<h1>3. DATENAUFBEREITUNG</h1>
<section id="Ã¼bersicht" class="level2">
<h2 class="anchored" data-anchor-id="Ã¼bersicht">3.1 Ãœbersicht</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(immoscout24_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [299 Ã— 4] (S3: tbl_df/tbl/data.frame)
 $ Price [CHF]: num [1:299] 2900 3660 2560 2770 2700 3260 2280 5540 3910 4410 ...
 $ Size [m2]  : num [1:299] 80 130 80 79 85 77 79 170 160 170 ...
 $ PLZ        : Named chr [1:299] "4058" "4057" "4057" "4053" ...
  ..- attr(*, "names")= chr [1:299] "Erlenmattstr. 71, 4058 Basel" "Brombacherstrasse 7, 4057 Basel" "KleinhÃ¼ningeranlage 17, 4057 Basel" "Laufenstrasse 4, 4053 Basel" ...
 $ City       : chr [1:299] "basel" "basel" "basel" "basel" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(immoscout24_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Price [CHF]     Size [m2]         PLZ                City          
 Min.   :1790   Min.   :  2.0   Length:299         Length:299        
 1st Qu.:2630   1st Qu.: 85.0   Class :character   Class :character  
 Median :3000   Median : 92.0   Mode  :character   Mode  :character  
 Mean   :3434   Mean   :101.0                                        
 3rd Qu.:3990   3rd Qu.:108.5                                        
 Max.   :8750   Max.   :250.0                                        
 NA's   :8      NA's   :36                                           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(immoscout24_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 299 Ã— 4
   `Price [CHF]` `Size [m2]` PLZ   City 
           &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
 1          2900          80 4058  basel
 2          3660         130 4057  basel
 3          2560          80 4057  basel
 4          2770          79 4053  basel
 5          2700          85 4056  basel
 6          3260          77 4054  basel
 7          2280          79 4058  basel
 8          5540         170 4001  basel
 9          3910         160 4052  basel
10          4410         170 4057  basel
# â„¹ 289 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Interaktive Tabelle mittels DT</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(immoscout24_df, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>, <span class="at">autoWidth =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-06a4bccb8672719f4802" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-06a4bccb8672719f4802">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299"],[2900,3660,2560,2770,2700,3260,2280,5540,3910,4410,3990,3050,2970,2860,4400,6700,4210,3780,2820,2930,2480,2850,3280,5070,2700,4400,4110,3000,2410,2980,2320,2250,3990,3870,2950,3680,2880,4440,2910,2400,4520,4520,3360,2640,3700,3670,3390,3510,2670,2500,2660,2430,2530,3150,2490,2880,2640,4520,2590,2460,3530,3260,2370,2410,2150,2830,3090,2500,3280,5380,5060,null,3840,3940,2950,3530,3480,4030,2910,2460,2880,2830,3180,4950,3160,4210,4030,2740,3050,2880,2970,2660,2530,2420,2960,2640,4620,3280,4510,3960,2080,3000,4240,3110,2850,2710,3690,null,null,null,null,null,null,3260,3680,3220,3400,2000,4200,3830,2480,3000,2610,2260,2810,2940,3120,3910,4090,2440,3210,2370,2940,2560,2130,1990,2330,4080,6560,2540,3480,2900,3230,2870,2610,3280,1790,2670,2510,2820,3060,2390,2420,2410,2250,2660,2320,2660,2560,2570,3000,3830,2530,2030,5400,4660,5430,5090,4990,5450,5060,5420,4000,7380,5130,6970,5990,5400,4460,6520,5990,5990,5990,4460,4460,4460,5710,5540,4750,4760,5450,7520,8070,8750,4120,5100,5650,4760,5630,6420,5780,4660,4180,4900,2740,2670,2590,4510,3230,3070,2870,4480,2900,4780,6130,2790,2730,4280,5440,3670,2690,2810,2250,2970,2700,3210,3220,3230,2820,2790,3630,2990,3310,2470,null,2640,2640,3390,2570,3130,3020,3860,2750,2490,2960,2630,3000,2560,2360,3950,2370,2900,2250,3160,2750,2390,3440,3310,3000,3260,3260,2630,2790,2300,2450,1830,3000,3290,2620,2810,2990,2950,3380,2550,2410,3390,2970,2420,2940,4300,2320,2170,2140,2560,2970,2570,2490,1840,2390,3360,2120,2590,2590,2660,2710,3140,2690,3480,2690],[80,130,80,79,85,77,79,170,160,170,170,91,86,93,99,250,110,89,91,91,92,88,88,170,104,180,130,92,82,109,79,88,96,83,88,190,98,130,97,92,160,130,83,95,140,140,111,170,79,92,82,78,78,70,92,86,95,210,73,92,130,85,82,88,82,73,104,80,92,106,88,99,130,101,109,160,160,80,82,null,80,100,160,130,104,79,89,79,76,100,87,83,78,101,92,160,105,null,null,null,86,83,130,111,79,109,77,87,77,85,140,108,64,160,160,null,null,null,null,null,83,86,82,96,100,86,92,130,140,82,99,80,87,89,91,102,180,102,null,null,108,85,71,90,85,86,96,104,92,81,63,79,85,73,81,95,null,null,null,null,101,97,79,null,110,95,100,109,92,91,95,95,86,111,101,86,87,78,140,86,86,86,78,null,78,78,160,106,101,87,111,108,130,140,86,99,71,77,87,170,100,82,130,105,87,85,90,73,101,101,95,93,140,170,108,110,130,140,130,88,73,107,null,null,86,130,109,95,109,109,102,86,102,91,130,108,93,104,140,null,null,null,null,null,100,79,110,92,65,111,79,109,79,109,88,92,89,96,87,87,109,76,null,null,97,2,98,85,85,130,97,109,86,101,105,90,70,null,null,null,null,null,null,null,86,78,74,96,79,107,107,92,93,82,99,77,null,null,null],["4058","4057","4057","4053","4056","4054","4058","4001","4052","4057","4057","4058","4056","4053","4052","4052","4058","4058","4053","4053","4053","4052","4053","4058","4057","4052","4051","4058","4055","4056","4052","4055","4058","4058","4052","4001","4056","4052","4055","4053","4056","4058","4001","4053","4058","4058","4001","4051","4057","4055","4053","4053","4053","4053","4053","4053","4058","4052","4053","4055","4056","4059","4058","4052","4057","4057","4053","4052","4056","4001","4058","4055","4053","4051","4052","4056","4058","4051","4057","4057","4057","4055","4056","4051","4055","4056","4051","4058","4052","4058","4056","4057","4055","4055","4052","4057","4058","4058","4059","4051","4057","4056","4058","4058","4056","4056","4056","4059","4059","4059","4059","4059","4059","4053","4058","4052","4056","4057","4053","4051","4056","4051","4052","4057","4057","4055","4057","4052","4052","4052","4056","4056","4057","4058","4053","4053","4057","4053","4051","4056","4057","4056","4056","4056","4059","4051","4057","4056","4053","4052","4056","4057","4058","4057","4057","4052","4059","4053","4052","4058","4051","4053","4052","4057","8003","8050","8050","8050","8051","8053","8037","8003","8057","8006","8049","8008","8050","8002","8050","8001","8006","8008","8001","8006","8008","8001","8045","8044","8006","8005","8057","8008","8008","8008","8047","8045","8006","8050","8045","8005","8055","8004","8048","8048","3011","3006","3007","3012","3004","3005","3008","3011","3008","3011","3013","3027","3027","3005","3013","3013","3014","3006","3018","3027","3018","3015","3018","3006","3027","3027","3008","3027","3008","3027","3011","3007","3027","3007","3013","3014","3006","3027","3014","3007","3013","3012","3027","3014","3014","3011","3008","3014","3027","3027","3006","3012","3018","3018","3012","3008","3008","3013","3027","3007","3027","3027","3027","3012","3007","3012","3027","3027","3012","3008","3008","3027","3027","3027","3007","3018","3027","3018","3008","3013","3027","3014","3012","3018","3012","3012","3007","3012","3012","3007","3007","3012","3005","3007","3027"],["basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","basel","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","zuerich","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern","bern"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Price [CHF]<\/th>\n      <th>Size [m2]<\/th>\n      <th>PLZ<\/th>\n      <th>City<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Price [CHF]","targets":1},{"name":"Size [m2]","targets":2},{"name":"PLZ","targets":3},{"name":"City","targets":4}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="beobachtungen-mit-nas-entfernen" class="level2">
<h2 class="anchored" data-anchor-id="beobachtungen-mit-nas-entfernen">3.2 Beobachtungen mit NAâ€™s entfernen</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>immoscout24_df <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(immoscout24_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="datenexploration" class="level1">
<h1>4. DATENEXPLORATION</h1>
<section id="vergleich-statistischer-kennzahlen" class="level2">
<h2 class="anchored" data-anchor-id="vergleich-statistischer-kennzahlen">4.1 Vergleich statistischer Kennzahlen</h2>
<section id="erstellen-der-summaries" class="level3">
<h3 class="anchored" data-anchor-id="erstellen-der-summaries">4.1.1 Erstellen der Summaries</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary der Daten erstellen</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>summary_all_cities_prices <span class="ot">&lt;-</span> <span class="fu">summary</span>(immoscout24_df<span class="sc">$</span><span class="st">`</span><span class="at">Price [CHF]</span><span class="st">`</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>summary_all_cities_sizes <span class="ot">&lt;-</span> <span class="fu">summary</span>(immoscout24_df<span class="sc">$</span><span class="st">`</span><span class="at">Size [m2]</span><span class="st">`</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>summary_basel_prices <span class="ot">&lt;-</span> <span class="fu">summary</span>(immoscout24_df<span class="sc">$</span><span class="st">`</span><span class="at">Price [CHF]</span><span class="st">`</span>[immoscout24_df<span class="sc">$</span>City <span class="sc">==</span> <span class="st">"basel"</span>])</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>summary_basel_sizes <span class="ot">&lt;-</span> <span class="fu">summary</span>(immoscout24_df<span class="sc">$</span><span class="st">`</span><span class="at">Size [m2]</span><span class="st">`</span>[immoscout24_df<span class="sc">$</span>City <span class="sc">==</span> <span class="st">"basel"</span>])</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>summary_zuerich_prices <span class="ot">&lt;-</span> <span class="fu">summary</span>(immoscout24_df<span class="sc">$</span><span class="st">`</span><span class="at">Price [CHF]</span><span class="st">`</span>[immoscout24_df<span class="sc">$</span>City <span class="sc">==</span> <span class="st">"zuerich"</span>])</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>summary_zuerich_sizes <span class="ot">&lt;-</span> <span class="fu">summary</span>(immoscout24_df<span class="sc">$</span><span class="st">`</span><span class="at">Size [m2]</span><span class="st">`</span>[immoscout24_df<span class="sc">$</span>City <span class="sc">==</span> <span class="st">"zuerich"</span>])</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>summary_bern_prices <span class="ot">&lt;-</span> <span class="fu">summary</span>(immoscout24_df<span class="sc">$</span><span class="st">`</span><span class="at">Price [CHF]</span><span class="st">`</span>[immoscout24_df<span class="sc">$</span>City <span class="sc">==</span> <span class="st">"bern"</span>])</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>summary_bern_sizes <span class="ot">&lt;-</span> <span class="fu">summary</span>(immoscout24_df<span class="sc">$</span><span class="st">`</span><span class="at">Size [m2]</span><span class="st">`</span>[immoscout24_df<span class="sc">$</span>City <span class="sc">==</span> <span class="st">"bern"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="erstellen-des-dataframes" class="level3">
<h3 class="anchored" data-anchor-id="erstellen-des-dataframes">4.1.2 Erstellen des Dataframes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Erstellung Dataframe</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>summary_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Stadt =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"Alle StÃ¤dte"</span>, <span class="dv">6</span>), <span class="fu">rep</span>(<span class="st">"Basel"</span>, <span class="dv">6</span>), <span class="fu">rep</span>(<span class="st">"ZÃ¼rich"</span>, <span class="dv">6</span>), <span class="fu">rep</span>(<span class="st">"Bern"</span>, <span class="dv">6</span>)),</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Kennwert =</span> <span class="fu">rep</span>(<span class="fu">names</span>(summary_all_cities_prices), <span class="dv">4</span>),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Preis =</span> <span class="fu">c</span>(<span class="fu">as.numeric</span>(summary_all_cities_prices), </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as.numeric</span>(summary_basel_prices), </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as.numeric</span>(summary_zuerich_prices), </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as.numeric</span>(summary_bern_prices)),</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  GrÃ¶sse <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">as.numeric</span>(summary_all_cities_sizes), </span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as.numeric</span>(summary_basel_sizes), </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as.numeric</span>(summary_zuerich_sizes), </span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">as.numeric</span>(summary_bern_sizes))</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean-Werte runden</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>summary_df <span class="ot">&lt;-</span> summary_df <span class="sc">%&gt;%</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Preis =</span> <span class="fu">ifelse</span>(Kennwert <span class="sc">==</span> <span class="st">"Mean"</span>, <span class="fu">round</span>(Preis, <span class="dv">0</span>), Preis),</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    GrÃ¶sse <span class="ot">=</span> <span class="fu">ifelse</span>(Kennwert <span class="sc">==</span> <span class="st">"Mean"</span>, <span class="fu">round</span>(GrÃ¶sse, <span class="dv">0</span>), GrÃ¶sse)</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(summary_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Stadt Kennwert Preis GrÃ¶sse
1  Alle StÃ¤dte     Min.  1790    2.0
2  Alle StÃ¤dte  1st Qu.  2650   85.0
3  Alle StÃ¤dte   Median  3000   92.0
4  Alle StÃ¤dte     Mean  3489  101.0
5  Alle StÃ¤dte  3rd Qu.  4055  108.5
6  Alle StÃ¤dte     Max.  8750  250.0
7        Basel     Min.  1790   63.0
8        Basel  1st Qu.  2610   82.0
9        Basel   Median  2950   92.0
10       Basel     Mean  3173  104.0
11       Basel  3rd Qu.  3670  109.0
12       Basel     Max.  6700  250.0
13      ZÃ¼rich     Min.  4000   71.0
14      ZÃ¼rich  1st Qu.  4760   86.0
15      ZÃ¼rich   Median  5420   95.0
16      ZÃ¼rich     Mean  5538  100.0
17      ZÃ¼rich  3rd Qu.  5990  108.5
18      ZÃ¼rich     Max.  8750  170.0
19        Bern     Min.  1830    2.0
20        Bern  1st Qu.  2605   86.0
21        Bern   Median  2870   95.0
22        Bern     Mean  3017   97.0
23        Bern  3rd Qu.  3245  108.0
24        Bern     Max.  6130  170.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Interaktive Tabelle mit DT anzeigen</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(summary_df, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>, <span class="at">autoWidth =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-4726994f949d07be30f7" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4726994f949d07be30f7">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],["Alle StÃ¤dte","Alle StÃ¤dte","Alle StÃ¤dte","Alle StÃ¤dte","Alle StÃ¤dte","Alle StÃ¤dte","Basel","Basel","Basel","Basel","Basel","Basel","ZÃ¼rich","ZÃ¼rich","ZÃ¼rich","ZÃ¼rich","ZÃ¼rich","ZÃ¼rich","Bern","Bern","Bern","Bern","Bern","Bern"],["Min.","1st Qu.","Median","Mean","3rd Qu.","Max.","Min.","1st Qu.","Median","Mean","3rd Qu.","Max.","Min.","1st Qu.","Median","Mean","3rd Qu.","Max.","Min.","1st Qu.","Median","Mean","3rd Qu.","Max."],[1790,2650,3000,3489,4055,8750,1790,2610,2950,3173,3670,6700,4000,4760,5420,5538,5990,8750,1830,2605,2870,3017,3245,6130],[2,85,92,101,108.5,250,63,82,92,104,109,250,71,86,95,100,108.5,170,2,86,95,97,108,170]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Stadt<\/th>\n      <th>Kennwert<\/th>\n      <th>Preis<\/th>\n      <th>GrÃ¶sse<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Stadt","targets":1},{"name":"Kennwert","targets":2},{"name":"Preis","targets":3},{"name":"GrÃ¶sse","targets":4}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="lollipop-plot-summary-preise-und-wohnungsgrÃ¶ssen" class="level3">
<h3 class="anchored" data-anchor-id="lollipop-plot-summary-preise-und-wohnungsgrÃ¶ssen">4.1.3 Lollipop-Plot Summary Preise und WohnungsgrÃ¶ssen</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reihenfolge der Kennwerte festlegen</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>summary_df<span class="sc">$</span>Kennwert <span class="ot">&lt;-</span> <span class="fu">factor</span>(summary_df<span class="sc">$</span>Kennwert, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Min."</span>, <span class="st">"1st Qu."</span>, <span class="st">"Median"</span>, <span class="st">"Mean"</span>, <span class="st">"3rd Qu."</span>, <span class="st">"Max."</span>))</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Farbenzuteilung</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>farben <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Basel"</span> <span class="ot">=</span> <span class="st">"#E41A1C"</span>, <span class="st">"ZÃ¼rich"</span> <span class="ot">=</span> <span class="st">"#377EB8"</span>, <span class="st">"Bern"</span> <span class="ot">=</span> <span class="st">"#4DAF4A"</span>, <span class="st">"Alle StÃ¤dte"</span> <span class="ot">=</span> <span class="st">"#984EA3"</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Lollipop-Plot fÃ¼r Summary der Preise</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_df, <span class="fu">aes</span>(<span class="at">x =</span> Stadt, <span class="at">y =</span> Preis, <span class="at">color =</span> Stadt)) <span class="sc">+</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> Stadt, <span class="at">xend =</span> Stadt, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> Preis), <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Kennwert, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> farben) <span class="sc">+</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Zusammenfassung der Preise nach Stadt"</span>, <span class="at">y =</span> <span class="st">"Preis in CHF"</span>) <span class="sc">+</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>, </span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>), </span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PRR_MC_QuartoDocument_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lollipop-Plot fÃ¼r Summary der WohnungsgrÃ¶ssen</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_df, <span class="fu">aes</span>(<span class="at">x =</span> Stadt, <span class="at">y =</span> GrÃ¶sse, <span class="at">color =</span> Stadt)) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> Stadt, <span class="at">xend =</span> Stadt, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> GrÃ¶sse), <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Kennwert, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> farben) <span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Zusammenfassung der WohnungsgrÃ¶ssen nach Stadt"</span>, <span class="at">y =</span> <span class="st">"GrÃ¶sse in mÂ²"</span>) <span class="sc">+</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>, </span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>), </span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PRR_MC_QuartoDocument_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="barplot-anzahl-angebote" class="level2">
<h2 class="anchored" data-anchor-id="barplot-anzahl-angebote">4.2 Barplot Anzahl Angebote</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(immoscout24_df, <span class="fu">aes</span>(<span class="at">x =</span> City, <span class="at">fill =</span> City)) <span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span>  <span class="co"># Erstellt das Balkendiagramm</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">'count'</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(count)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Anzahl Angebote pro Stadt"</span>) <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="at">legend.position =</span> <span class="st">"right"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PRR_MC_QuartoDocument_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scatterplot-wohnungsgrÃ¶sse-vs.-preis" class="level2">
<h2 class="anchored" data-anchor-id="scatterplot-wohnungsgrÃ¶sse-vs.-preis">4.3 Scatterplot WohnungsgrÃ¶sse vs.&nbsp;Preis</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(immoscout24_df, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">Size [m2]</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Price [CHF]</span><span class="st">`</span>)) <span class="sc">+</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>City) <span class="sc">+</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Vergleich StÃ¤dte: Size/Price"</span>) <span class="sc">+</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PRR_MC_QuartoDocument_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="densityplot-preisvergleich" class="level2">
<h2 class="anchored" data-anchor-id="densityplot-preisvergleich">4.4 Densityplot Preisvergleich</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(immoscout24_df, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">Price [CHF]</span><span class="st">`</span>, <span class="at">fill =</span> City)) <span class="sc">+</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Preisvergleich nach Stadt"</span>) <span class="sc">+</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">ovveride.aes =</span> <span class="fu">list</span>(<span class="at">alpha =</span> <span class="dv">1</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in guide_legend(ovveride.aes = list(alpha = 1)): Arguments in `...` must be used.
âœ– Problematic argument:
â€¢ ovveride.aes = list(alpha = 1)
â„¹ Did you misspell an argument name?</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PRR_MC_QuartoDocument_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="densityplot-wohnungsgrÃ¶ssenvergleich" class="level2">
<h2 class="anchored" data-anchor-id="densityplot-wohnungsgrÃ¶ssenvergleich">4.5 Densityplot WohnungsgrÃ¶ssenvergleich</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(immoscout24_df, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">Size [m2]</span><span class="st">`</span>, <span class="at">fill =</span> City)) <span class="sc">+</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span>  <span class="co"># FÃ¼llt die Density-Kurven und setzt Transparenz</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"WohnungsgrÃ¶ssenvergleich nach Stadt"</span>) <span class="sc">+</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">alpha =</span> <span class="dv">1</span>)))  <span class="co"># Setzt Alpha fÃ¼r die Legende auf 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PRR_MC_QuartoDocument_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="boxplot-preisvergleich" class="level2">
<h2 class="anchored" data-anchor-id="boxplot-preisvergleich">4.6 Boxplot Preisvergleich</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(immoscout24_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Price [CHF]</span><span class="st">`</span>, <span class="at">fill =</span> City)) <span class="sc">+</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> City, <span class="at">scales =</span> <span class="st">"free_x"</span>, <span class="at">space =</span> <span class="st">"free_x"</span>) <span class="sc">+</span>  <span class="co"># Jede Stadt bekommt eine eigene Spalte, aber alle teilen die gleiche y-Achse</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Preisvergleich nach Stadt"</span>, <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Preis in CHF"</span>) <span class="sc">+</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),  <span class="co"># Entfernt die x-Achsen-Beschriftungen</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),  <span class="co"># Entfernt die x-Achsen-Ticks</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),  <span class="co"># Entfernt den Hintergrund der Facetten-Titel</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>)  <span class="co"># Zentriert die Facetten-Titel</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PRR_MC_QuartoDocument_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="boxplot-wohnungsgrÃ¶ssenvergleich" class="level2">
<h2 class="anchored" data-anchor-id="boxplot-wohnungsgrÃ¶ssenvergleich">4.7 Boxplot WohnungsgrÃ¶ssenvergleich</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(immoscout24_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Size [m2]</span><span class="st">`</span>, <span class="at">fill =</span> City)) <span class="sc">+</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> City, <span class="at">scales =</span> <span class="st">"free_x"</span>, <span class="at">space =</span> <span class="st">"free_x"</span>) <span class="sc">+</span>  <span class="co"># Jede Stadt bekommt eine eigene Spalte, aber alle teilen die gleiche y-Achse</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"WohnungsgrÃ¶ssenvergleich nach Stadt"</span>, <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"GrÃ¶sse in m2"</span>) <span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),  <span class="co"># Entfernt die x-Achsen-Beschriftungen</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),  <span class="co"># Entfernt die x-Achsen-Ticks</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),  <span class="co"># Entfernt den Hintergrund der Facetten-Titel</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>)  <span class="co"># Zentriert die Facetten-Titel</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PRR_MC_QuartoDocument_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="barplot-anzahl-plz" class="level2">
<h2 class="anchored" data-anchor-id="barplot-anzahl-plz">4.8 Barplot Anzahl PLZ</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Daten nach City und PLZ gruppieren und die Anzahl fÃ¼r jede PLZ zÃ¤hlen</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>grouped_city <span class="ot">&lt;-</span> immoscout24_df <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(City, PLZ) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Anzahl =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(City) <span class="sc">%&gt;%</span>  <span class="co"># Gruppieren nach Stadt fÃ¼r die Summation</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Anzahl),  <span class="co"># Summe der Anzahlen pro Stadt</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Relative_Haeufigkeit =</span> Anzahl <span class="sc">/</span> Total) <span class="sc">%&gt;%</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()  <span class="co"># Entfernen der Gruppierung</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Balkendiagramm erstellen mit einer Facette fÃ¼r jede Stadt und relative HÃ¤ufigkeit anzeigen</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(grouped_city, <span class="fu">aes</span>(<span class="at">x =</span> PLZ, <span class="at">y =</span> Relative_Haeufigkeit, <span class="at">fill =</span> City)) <span class="sc">+</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">toupper</span>(City), <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span>  <span class="co"># StÃ¤dtenamen in Facetten, vertikal angeordnet</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Relative PLZ-HÃ¤ufigkeit pro Stadt"</span>, <span class="at">x =</span> <span class="st">"PLZ"</span>, <span class="at">y =</span> <span class="st">"Relative HÃ¤ufigkeit"</span>) <span class="sc">+</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">8</span>),  <span class="co"># Dreht die PLZ auf der X-Achse fÃ¼r bessere Lesbarkeit und zentriert sie</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),  <span class="co"># VergrÃ¶ssert die Facetten-Titel</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>  <span class="co"># Entfernt die Legende</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="PRR_MC_QuartoDocument_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="resultate" class="level1">
<h1>5. RESULTATE</h1>
<ul>
<li><p><strong>Mietpreise</strong>: ZÃ¼rich hat die hÃ¶chsten Median - Mietpreise fÃ¼r 3.5-Zimmerwohnungen, gefolgt von Basel und Bern.</p></li>
<li><p><strong>Preisspanne</strong>: ZÃ¼rich zeigt eine breitere Verteilung der Mietpreise, wÃ¤hrend Basel und Bern eine konzentriertere Verteilung aufweisen.</p></li>
<li><p><strong>Durchschnittliche WohnungsgrÃ¶ssen</strong>: Die Verteilung der WohnungsgrÃ¶ssen ist in allen drei StÃ¤dten Ã¤hnlich, mit einem Schwerpunkt auf Wohnungen zwischen 70 und 100 Quadratmetern. In Bern dominieren kleinere Wohnungen.</p></li>
<li><p><strong>Anzahl der Angebote</strong>: ZÃ¼rich und Basel haben fast identisch viele Angebote fÃ¼r 3.5-Zimmerwohnungen und bieten jeweils etwa 40% mehr Wohnungen als Bern.</p></li>
<li><p><strong>Korrelation Preis / WohnungsgrÃ¶sse</strong> : Es gibt eine positive Korrelation zwischen WohnungsgrÃ¶sse und Mietpreis in allen drei StÃ¤dten. ZÃ¼rich zeigt hÃ¤ufigere und extremere Ausreisser, bei denen grosse Wohnungen extrem hohe Preise haben.</p></li>
<li><p><strong>Relative HÃ¤ufigkeit PLZ</strong>: Die freien Wohnungen konzentrieren sich in Basel auf die PLZ 4057 (ca. 20 %), in ZÃ¼rich auf die PLZ 8050 (ca. 15 %) sowie Bern auf die PLZ 3018 (ca. 20 %)</p></li>
</ul>
</section>
<section id="ausblick" class="level1">
<h1>6. AUSBLICK</h1>
<ul>
<li><strong>Problematik:</strong> StichprobengrÃ¶sse mit Tag n = 1 , dadurch keine verlÃ¤ssliche Interpretation mÃ¶glich</li>
</ul>
<p><strong>WeiterfÃ¼hrende Analysen</strong>:</p>
<ul>
<li><p><strong>Preisentwicklung</strong>: Ãœberwachung und Analyse der Mietpreisentwicklung Ã¼ber einen lÃ¤ngeren Zeitraum, um Trends und Muster zu erkennen.</p></li>
<li><p><strong>Prognosen</strong>: Erstellung von Modellen zur Vorhersage zukÃ¼nftiger Mietpreise basierend auf langfristiger Preisentwicklung</p></li>
<li><p><strong>Stadtteilanalyse</strong>: Detaillierte Analyse der Mietpreise auf Stadtteilebene, um Unterschiede innerhalb einer Stadt zu identifizieren.</p></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>